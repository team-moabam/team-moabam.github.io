{"componentChunkName":"component---src-templates-blog-template-js","path":"/firebase-push-notification/","result":{"data":{"cur":{"id":"42b0801c-543e-5972-859a-5c4d7e06796f","html":"<p>안녕하세요. 현재 데브코스 4기로 활동 중인 모아밤팀 서버 개발자 홍혁준입니다.</p>\n<p>이번 포스팅에서 <code class=\"language-text\">FCM Push</code>에 대해 이야기를 풀어내 보려고 합니다. 감사합니다.</p>\n<hr>\n<h2 id=\"모아밤-서비스에는-어떤-push-알림이-필요할까\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EC%95%84%EB%B0%A4-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EB%8A%94-%EC%96%B4%EB%96%A4-push-%EC%95%8C%EB%A6%BC%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C\" aria-label=\"모아밤 서비스에는 어떤 push 알림이 필요할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모아밤 서비스에는 어떤 Push 알림이 필요할까?</h2>\n<p>푸시 알림이란 사용자가 서비스를 사용하고 있지 않은 상황에서도 사용자에게 알림을 보내는 방법입니다.</p>\n<p>푸시 알림을 가장 단순하게 구현하는 방법은 <code class=\"language-text\">Polling</code> 방식으로 주기적으로 서버에 편지 도착 여부를 묻는 <code class=\"language-text\">HTTP</code> 요청을 보내는 방법이 있는데요. 이 <code class=\"language-text\">Polling</code> 방식은 <code class=\"language-text\">Short Polling</code>과 <code class=\"language-text\">Long Polling</code> 방식이 있는데, <code class=\"language-text\">Short Polling</code>은 서버가 줄 데이터가 없음에도 주기적으로 요청과 응답 작업을 반복해야 해서 불필요한 트래픽이 발생합니다. 반면 <code class=\"language-text\">Long Polling</code>은 <code class=\"language-text\">Short Polling</code> 방식에 비해 불필요한 요청과 응답을 반복하지 않아도 되지만, 클라이언트와 연결을 계속 유지해야 해서 서버 자원을 소모하게 되죠. 이런 단점들로 인해 <code class=\"language-text\">FCM</code>을 찾아보게 되었습니다.</p>\n<p>모아밤 서비스는 앱, 웹을 지원해야 합니다. 그리고 현재 모아밤에서 구현하고자 하는 기능은 사용자가 원할 때, 다른 사용자에게 제한된 횟수만큼 알림을 보내야 합니다. 또한 서버 시간에 따라서 주기적으로 푸시 알림을 보내는 기능입니다. 이런 요구사항을 종합해 봤을 때, <code class=\"language-text\">FCM</code>을 선택하게 되었습니다. 그럼 이제 <code class=\"language-text\">FCM</code>을 도입하기 전 사전지식을 얻어봅시다.</p>\n<hr>\n<h2 id=\"fcmfirebase-cloud-messaging\" style=\"position:relative;\"><a href=\"#fcmfirebase-cloud-messaging\" aria-label=\"fcmfirebase cloud messaging permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FCM(Firebase Cloud Messaging)</h2>\n<p><code class=\"language-text\">FCM</code>은 무료로 메시지를 안정적으로 전송할 수 있는 교차 플랫폼 메시징 솔루션입니다. 이는 특정 개인에게 메시지를 보낼 수도 있고 특정 토픽을 구독하는 사용자에게 전체 메시지를 보낼 수도 있죠.</p>\n<p>주요 기능으로는 사용자에게 표시되는 푸시 알림 메시지 전송과 애플리케이션 단에서 처리하는 데이터 메시지 전송이 있습니다. 또한 단일 기기 (특정 사용자), 기기 그룹 (사용자 그룹), 주제를 구독한 기기 (토픽의 구독)을 타겟팅 할 수도 있습니다. 자세한 정보는 <a href=\"https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko\">공식 문서</a>를 확인 바랍니다.</p>\n<hr>\n<h3 id=\"fcm-token-이란\" style=\"position:relative;\"><a href=\"#fcm-token-%EC%9D%B4%EB%9E%80\" aria-label=\"fcm token 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FCM Token 이란?</h3>\n<p>어플리케이션이 FCM 서버와 통신하기 위해 사용되는 고유한 식별자로\u001f어플리케이션이 서버와 통신할 때 토큰을 사용해 FCM 서버에서 어플리케이션을 식별하고 이를 통해 메시지 전송을 할 수 있습니다.</p>\n<h4 id=\"토큰-생성\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\" aria-label=\"토큰 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰 생성</h4>\n<p>어플리케이션을 처음 실행할 때 FCM SDK는 클라이언트 인스턴스에 대한 등록 토큰을 생성합니다.</p>\n<h4 id=\"토큰-만료\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0-%EB%A7%8C%EB%A3%8C\" aria-label=\"토큰 만료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰 만료</h4>\n<p>FCM 토큰은 정해진 수명이나 갱신 주기는 없고\u001d 아래의 이벤트가 발생할 때 만료합니다.</p>\n<ul>\n<li>어플리케이션 인스턴스 ID를 삭제했을 때,</li>\n<li>어플리케이션이 새 기기에서 복원되었을 때,</li>\n<li>사용자가 어플리케이션을 제거 및 재설치했을 때,</li>\n<li>사용자가 어플리케이션 데이터를 지웠을 때,</li>\n</ul>\n<hr>\n<h3 id=\"푸시-알림을-위한-3가지-컴포넌트\" style=\"position:relative;\"><a href=\"#%ED%91%B8%EC%8B%9C-%EC%95%8C%EB%A6%BC%EC%9D%84-%EC%9C%84%ED%95%9C-3%EA%B0%80%EC%A7%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\" aria-label=\"푸시 알림을 위한 3가지 컴포넌트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>푸시 알림을 위한 3가지 컴포넌트</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQY021Quw6CQBDkg/wC/87EH/EXtLajsbEhodGCQikEhMvhPdg7xuwaNAE32WT3JjM3s4n3HtZaGGMwDAPmFQPBeyfzOI5LPEbhE5HsiXMOdV2j6zoBWDSEIE0hIvgXbsct6uteBL8YkezMKYoCTdP8BNM0RZ7nYLdaa3FrjYHSPdpHifawgj2tMVD8YNZAKSUzc8qyFJ4I9n2PqqrEIT/OYzlncD9v8LzssAwMEc6yTERFkCPyL+yUo0y3mprrqQhK/8f4hsyd7v8GLNeByhW2EwoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm1.png\"\n        title=\"fcm1.png\"\n        src=\"/static/8995bff39bd32d05e01554ef99d23cf1/37523/fcm1.png\"\n        srcset=\"/static/8995bff39bd32d05e01554ef99d23cf1/e9ff0/fcm1.png 180w,\n/static/8995bff39bd32d05e01554ef99d23cf1/f21e7/fcm1.png 360w,\n/static/8995bff39bd32d05e01554ef99d23cf1/37523/fcm1.png 720w,\n/static/8995bff39bd32d05e01554ef99d23cf1/2c5fd/fcm1.png 1006w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h4 id=\"알림-제공자-service-application\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EB%A6%BC-%EC%A0%9C%EA%B3%B5%EC%9E%90-service-application\" aria-label=\"알림 제공자 service application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알림 제공자 (Service Application)</h4>\n<p>알림 요청을 만들어 <code class=\"language-text\">FCM</code>으로 보내주는 주체로 알림 요청을 위해서는 알림 요청을 보내는 데\n필요한 고유 식별자인 단말 토큰과 알림 내용을 담은 <code class=\"language-text\">JSON</code> 딕셔너리 형식의 페이로드(<code class=\"language-text\">Payload</code>)가 필요합니다.</p>\n<h4 id=\"fcm\" style=\"position:relative;\"><a href=\"#fcm\" aria-label=\"fcm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FCM</h4>\n<p><code class=\"language-text\">Google</code>이 제공하는 원격 서비스로 푸시 알림을 다양한 플랫폼으로 보내는 역할을 담당합니다.\n즉, <code class=\"language-text\">FCM</code>은 안드로이드, <code class=\"language-text\">iOS</code>, 웹을 포함한 다양한 플랫폼의 사용자에게 메시지를 보낼 수 있는 크로스 플랫폼 메시징 솔루션입니다.</p>\n<h4 id=\"디바이스-장치\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4-%EC%9E%A5%EC%B9%98\" aria-label=\"디바이스 장치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디바이스 장치</h4>\n<p>푸시 알림을 수신하는 사용자 단말기입니다.</p>\n<hr>\n<h3 id=\"fcm-토큰의-신성도-보장\" style=\"position:relative;\"><a href=\"#fcm-%ED%86%A0%ED%81%B0%EC%9D%98-%EC%8B%A0%EC%84%B1%EB%8F%84-%EB%B3%B4%EC%9E%A5\" aria-label=\"fcm 토큰의 신성도 보장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FCM 토큰의 신성도 보장</h3>\n<p>서버 개발에서 핵심은 토큰의 신선도 보장이라고 생각합니다. <a href=\"https://firebase.google.com/docs/cloud-messaging/manage-tokens?hl=ko\">Firebase 공식 문서</a>에서도 언급됐지만, 데이터베이스에 토큰이 쌓이다 보면 주기적 알림 서비스의 경우에 발생할 수 있는 이슈가 존재합니다. 오래된 등록 토큰이 있는 비활성 장치에 메시지를 전송하면 리소스를 낭비하게 되고 푸시 알림의 전송 속도가 느려질 수 있기 때문이죠.</p>\n<p>따라서 주기적으로 토큰의 타임스탬프를 업데이트하는 서버 로직을 추가하고 오래된 토큰을 판정하기 위한 임계 기간 동안 토큰을 사용하지 않은 유저의 토큰을 삭제하고 업데이트하는 것이 좋을 것 같습니다.</p>\n<hr>\n<h3 id=\"fcm-흐름\" style=\"position:relative;\"><a href=\"#fcm-%ED%9D%90%EB%A6%84\" aria-label=\"fcm 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FCM 흐름</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVQY01WQW26DMBBF2U131e1lB/1Ld4HUIPUHBSQEcXAAv82pxohI/bga2R6fe2eqnDPOOUIIeO85z9u2Ya3Fh4g3mhAyeYeUIiklYjyqSP5J/77vVAKapommacqlPIrWdeWln7gEr9sX4/cnzgx4n3DOFlORmCql6LquhKnEqe976roukGVZMMagteapHtgI6ueCvn6gxxrr8z+gpBqGgbZtj4RCFZez4RzlWIErrtuq6e+/xJjeY54SyDzPBSoJ/wDvmTOZruHIqAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm2.png\"\n        title=\"fcm2.png\"\n        src=\"/static/ac13bdf4e2a9661719de01ea71f2cd33/37523/fcm2.png\"\n        srcset=\"/static/ac13bdf4e2a9661719de01ea71f2cd33/e9ff0/fcm2.png 180w,\n/static/ac13bdf4e2a9661719de01ea71f2cd33/f21e7/fcm2.png 360w,\n/static/ac13bdf4e2a9661719de01ea71f2cd33/37523/fcm2.png 720w,\n/static/ac13bdf4e2a9661719de01ea71f2cd33/302a4/fcm2.png 1080w,\n/static/ac13bdf4e2a9661719de01ea71f2cd33/b94e3/fcm2.png 1126w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>가장 먼저 <code class=\"language-text\">FCM</code>과 앱을 연동합니다.</li>\n<li>알림 제공자(서비스 어플리케이션)는 <code class=\"language-text\">FCM</code>에 단말 토큰과 페이로드를 담아서 <code class=\"language-text\">HTTP POST</code> 요청을 보냅니다.</li>\n<li>요청을 받은 <code class=\"language-text\">FCM</code>은 알림 제공자에게 적절한 <code class=\"language-text\">HTTP</code> 응답을 보냅니다.</li>\n<li><code class=\"language-text\">FCM</code>은 메시지 우선순위, 수신 단말과의 통신 가능 여부 등을 고려해 메시지를 수신 단말에 보냅니다.</li>\n<li>수신 단말은 정보 이상 유무에 따라 적절한 <code class=\"language-text\">HTTP</code> 응답을 보냅니다.</li>\n</ol>\n<p>이렇게만 보면 이해가 잘 안갈 수도 있습니다. 더 자세한 흐름을 보여드리겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVQoz4VSW27DMAzLbXe3XWNnGDCgBfa1Bm2ap9+ObQ5Ul7XpU4BgI2YoUVSFiyil4H6U1Y24R1ldk+Wc4ZxD27boug6TNvAZUN0Pms93lOzwLG4IeaaU0A4K+/0edV1jUB59/YX64w1j+w1tPLRW0FrDGCOFj8cjlFJnwoVsEWdDFrBWCqVkhBjQ9y1CiJjnWTLGKIqmaRJy3u92yDQ+wXsv+So4IpKL5IXgkgx/hAQyz2/5xgRRY+1/4QoPXNM+w1onYDxxdiEMIaxNuQ5lg8zQGP1SMrsjoazNIovJwQ7DIG4NQ4/NZoOmaaQDDv7S0b7vBTeOo2wDk7iKQF64KqeOjFQ7HA7YbrfY7XaIMYiDy0rRYZ78xjcST0qJMStTrsPGgpSBOWUhoDT+xGTRGGf6h9EEWD/fLvZ62AUuzNBuhnERxliRS4kcS9e1mJSG9UkwKZ+a+gX/yaw8jN8pywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm3.png\"\n        title=\"fcm3.png\"\n        src=\"/static/8ed6cc30d99e53bbab4b944858d72932/37523/fcm3.png\"\n        srcset=\"/static/8ed6cc30d99e53bbab4b944858d72932/e9ff0/fcm3.png 180w,\n/static/8ed6cc30d99e53bbab4b944858d72932/f21e7/fcm3.png 360w,\n/static/8ed6cc30d99e53bbab4b944858d72932/37523/fcm3.png 720w,\n/static/8ed6cc30d99e53bbab4b944858d72932/302a4/fcm3.png 1080w,\n/static/8ed6cc30d99e53bbab4b944858d72932/21b4d/fcm3.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>가장 먼저 기기가 어플리케이션을 설치 및 사용할 경우 발생합니다.</p>\n<ol>\n<li><code class=\"language-text\">Firebase</code>가 클라이언트에게 FCM 토큰을 생성해줍니다.</li>\n<li>클라이언트는 <code class=\"language-text\">Firebase</code>로부터 받은 <code class=\"language-text\">FCM Token</code>을 서버에게 저장 요청을 보냅니다.</li>\n</ol>\n<p>그리고 나서, 사용자가 클라이언트에 알림 요청하는 경우 발생합니다. 그리고 위 이미지에는 없지만 서버 자체에서 알람 요청을 하는 경우도 있습니다.</p>\n<ol>\n<li>클라이언트가 서버로 알림 생성 요청을 보냅니다.</li>\n<li>서버는 보내려는 메시지 데이터를 FCM 서버에 알람 요청을 합니다.</li>\n<li>FCM 서버는 해당 서버가 올바른지 확인 후 클라이언트에게 푸시 알람을 보냅니다.</li>\n</ol>\n<p>이제 사전지식을 어느정도 습득했으니 어떻게 도입했는 지 살펴봅시다.</p>\n<hr>\n<h2 id=\"알림-아키텍처\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EB%A6%BC-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\" aria-label=\"알림 아키텍처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알림 아키텍처</h2>\n<p>모아밤 프로젝트에서 필요한 요구사항은 다음과 같습니다.</p>\n<ul>\n<li>방 참여자들은 다른 참여자들에게 12시간마다 1회의 콕 찌르기 알림을 보낼 수 있다.</li>\n<li>방 내의 루틴 인증 시작 타임이 된다면 방 참여자들에게 알림이 간다.</li>\n</ul>\n<p>요구사항을 봤을 때, 알림 제공자 역할을 하는 별도 인스턴스를 생성해 애플리케이션 서버와 알림 서버를 분리해야 할 지, 아니면 어플리케이션 서버에 알림 기능을 추기할 지 고민이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlklEQVQI12WMTQoCMQyFPbvgSdx5CBeu3HgLpc5MfwbbGVqb9pNWUMEHScjLy7fJ+spwOmCcw1lLWFbW2TAe9xijcc4RQuCZElIqYR4ZzltiuJOlIpKx1qK1pmnTmvNrN/qz98SUeKwJY8wf0M8j6rIj+htZ6MBpmlBKvYG1VooIfZbSq6lI/ngiwq+WCLV+93aPMfb8C0q35v23R06RAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm4.png\"\n        title=\"fcm4.png\"\n        src=\"/static/ae6371dafeed0ed54e49949377609012/37523/fcm4.png\"\n        srcset=\"/static/ae6371dafeed0ed54e49949377609012/e9ff0/fcm4.png 180w,\n/static/ae6371dafeed0ed54e49949377609012/f21e7/fcm4.png 360w,\n/static/ae6371dafeed0ed54e49949377609012/37523/fcm4.png 720w,\n/static/ae6371dafeed0ed54e49949377609012/302a4/fcm4.png 1080w,\n/static/ae6371dafeed0ed54e49949377609012/21b4d/fcm4.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>아무래도 어플리케이션에 존재하는 모든 방의 모든 참여자에게 알림을 인증 타임마다 보내야 하니, 푸시 알림 시스템이 대량 요청을 처리할 것으로 예상은 됩니다. 따라서 효과적으로 작동하는 데 필요한 리소스와 용량을 확보하기 위해 위 이미지와 같이 별도 인스턴스를 사용하는 것이 유용할 수도 있을 것 같습니다. 또한 별도 인스턴스를 사용하면 푸시 알림 시스템에 대한 격리 및 제어 기능을 더 많이 제공할 수도 있을 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA60lEQVQY02VQS07FMAzsDbgnV3lLLsCKC3ADEBIblkhUpTT9SK+iQFuljZM0yYBNQU8w0ih24ozHztJrjtTe4y9ijEgp7QRCCAhpf0zpX+22bRJn9vYSy9U5HvNnNHWNl7JE0zTQWovYD+y7wvHuAJqedpEgQoxpmtC2reSZJYIjksthGDCOI5xzsNZiXVdYMtAU8FHeYLk+g1UXoA0go0FEMMag73uhCDrvwayqSroopTDPsxR77xF51Ags8xH1wwH6Ld+njr8TdF2HoijESMaqREY6sQg745jPU/BXdhbid3a6Rt6vNP9y+AnTi3/PA211eQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm5.png\"\n        title=\"fcm5.png\"\n        src=\"/static/8d95568d4730c50faa8ddbece422ce38/37523/fcm5.png\"\n        srcset=\"/static/8d95568d4730c50faa8ddbece422ce38/e9ff0/fcm5.png 180w,\n/static/8d95568d4730c50faa8ddbece422ce38/f21e7/fcm5.png 360w,\n/static/8d95568d4730c50faa8ddbece422ce38/37523/fcm5.png 720w,\n/static/8d95568d4730c50faa8ddbece422ce38/2e694/fcm5.png 1048w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하지만 현재의 모아밤 서비스를 본다면, 주기적인 알림 외는 콕 찌르기를 하는 경우에만 알림 요청이 발생하고, 아직 개발 시작 단계이기 때문에, 사용자가 존재하지 않습니다. 만약 개발이 끝나고 운영 단계라고 하여도 사용자가 그리 많지 않을 것 같습니다. 😢 때문에 기존 응용 프로그램과 동일한 인스턴스를 사용하기로 결정했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQ4y52Uy24TMRSG8xg8AI/BAqlIiAXvwAuwYc+Kh+AdQGLLEqSyIS1SKUJq2SSoVEkm8Xjcia9jz4fmkuZKBRzJI8tjfz7n/8/MoK5rmuieEIJCm1+kFLr1uma1529i0B4KgaQ1yVlkcYaQpxh7fQv8l2iByVrqqiKlhFQ/mIsvGCvoWP+RYXKuBWpjyLIZWTZhni2w1m6VXafUjZVMBy4a1BsZ7sYtaOfgXRkPeicgpXYao8X5RXPNNsQY5MkJ5Xh8p1mDpswbKVFF0Wt4jpBDCjXGuUAIHm0tH1885/3RQ94cPaCcTTpoSvvARqdSSkqlWqAqLxHFGTflBGs93nuM9xy/esnr+/d4+/QRy2z2Z2BXsm9qYKkNi0XGZDqiKBQxxq3NF8cfKKZ9dnXa03rLlBQ6U5zzCNFlu2lKOw6YtaljM1+3TZ+NtUuuri737UseOfqMWaq9V1Xfw+s+NKbLUmtU8R2pTlnqa7yPOGfxoUKJOdN3T5DDZzgfWm211jjnMMa08/WnF2P3pRhNnn8ly4cYMyOEiPeOqork8xnq02PstwYYCSG0jd+AhRDked5ruPNzsLYkm48ONu3P8QXTyfXe+grcAH8Dvr488s/uoyAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm6.png\"\n        title=\"fcm6.png\"\n        src=\"/static/9a819aa65edbb92a888a8865c91ea706/37523/fcm6.png\"\n        srcset=\"/static/9a819aa65edbb92a888a8865c91ea706/e9ff0/fcm6.png 180w,\n/static/9a819aa65edbb92a888a8865c91ea706/f21e7/fcm6.png 360w,\n/static/9a819aa65edbb92a888a8865c91ea706/37523/fcm6.png 720w,\n/static/9a819aa65edbb92a888a8865c91ea706/587b0/fcm6.png 970w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>추가적으로 요구사항을 보면 “인증 타임 당 1회의 콕 찌르기 알림을 보낼 수 있다.”를 충족하기 위해, <code class=\"language-text\">Redis</code> 저장소를 활용할 것입니다. 또한 정해진 인증타임에 푸시를 자동발송 해야하니 스케쥴러를 활용할 예정입니다. 즉, 위 이미지와 같은 아키텍처가 나오게 됩니다.</p>\n<p>해당 아키텍처 선정 이유를 정리하면 다음과 같습니다.</p>\n<ul>\n<li>현재 상황에선 하나의 <code class=\"language-text\">EC2</code>로도 충분합니다. 굳이 2개로 분리하는 것은 비용 문제가 발생합니다.</li>\n<li>초기 서비스이기 때문에, 사용자가 적은 만큼 트래픽이 많이 발생하지 않습니다. 즉, 인증 타임마다 <code class=\"language-text\">Spring Batch</code>를 돌리기엔, 서버가 너무 무거워집니다. 오버 엔지니어링입니다.</li>\n<li>인증 타임이 됐을 때, 시간 내에 인증을 해야 해서 신속하게 푸시 메시지가 발송되도록 카프카를 적용하는 것도 고려해볼 수 있습니다. 하지만, 위와 동일한 이유로 오버 엔지니어링이라고 생각합니다.</li>\n<li>주니어 개발자로서 아직은 현재 사용되는 기술에 대한 이해와 공부가 먼저입니다.</li>\n</ul>\n<p>위와 같은 이유로 해당 아키텍처로 진행하게 되었습니다.</p>\n<hr>\n<h2 id=\"모아밤의-fcm-도입기\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EC%95%84%EB%B0%A4%EC%9D%98-fcm-%EB%8F%84%EC%9E%85%EA%B8%B0\" aria-label=\"모아밤의 fcm 도입기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모아밤의 FCM 도입기</h2>\n<h3 id=\"디펜던시-등록\" style=\"position:relative;\"><a href=\"#%EB%94%94%ED%8E%9C%EB%8D%98%EC%8B%9C-%EB%93%B1%EB%A1%9D\" aria-label=\"디펜던시 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디펜던시 등록</h3>\n<p><code class=\"language-text\">build.gradle</code>을 설정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Firebase Admin\nimplementation 'com.google.firebase:firebase-admin:9.2.0'</code></pre></div>\n<hr>\n<h3 id=\"firebase-연동-준비\" style=\"position:relative;\"><a href=\"#firebase-%EC%97%B0%EB%8F%99-%EC%A4%80%EB%B9%84\" aria-label=\"firebase 연동 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Firebase 연동 준비</h3>\n<p>Firebase 연동 준비는 제가 참고한 <a href=\"https://velog.io/@heelieben/FCM-React-Web-Push-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-feat.-pwa-service-worker\">React + FCM 구현하기</a>와 <a href=\"https://zuminternet.github.io/FCM-PUSH/\">FCM 푸시 파헤치기</a>를 참고하시면 됩니다!</p>\n<hr>\n<h3 id=\"spring-boot-설정\" style=\"position:relative;\"><a href=\"#spring-boot-%EC%84%A4%EC%A0%95\" aria-label=\"spring boot 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring Boot 설정</h3>\n<p><strong>1) Firebase Config 설정</strong></p>\n<ul>\n<li><code class=\"language-text\">Firebase</code> 앱 내, 프로젝트의 권한을 얻기 위해서는 <code class=\"language-text\">SDK</code> 권한키를 필수로 보유해야 합니다.</li>\n<li>공식문서에서 제공된 방식과 다르게 절대 <code class=\"language-text\">ClassPathResource</code>를 활용했습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FcmConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FirebaseMessaging</span> <span class=\"token function\">firebaseMessaging</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InputStream</span> inputStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ClassPathResource</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FIREBASE_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">GoogleCredentials</span> credentials <span class=\"token operator\">=</span> <span class=\"token class-name\">GoogleCredentials</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromStream</span><span class=\"token punctuation\">(</span>inputStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">FirebaseOptions</span> firebaseOptions <span class=\"token operator\">=</span> <span class=\"token class-name\">FirebaseOptions</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setCredentials</span><span class=\"token punctuation\">(</span>credentials<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">FirebaseApp</span><span class=\"token punctuation\">.</span><span class=\"token function\">getApps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">FirebaseApp</span><span class=\"token punctuation\">.</span><span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span>firebaseOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======= Firebase init start =======\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">FirebaseMessaging</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======= firebase moabam error =======\\n\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FcmException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorMessage</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FAILED_FCM_INIT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>2) 콕 찌르기 알림 기능 구현 코드 중 일부분</strong></p>\n<ul>\n<li>방 참여자들은 다른 참여자들에게 12시간마다 1회의 콕 찌르기 알림을 보낼 수 있다는 요구사항을 지키기 위해</li>\n</ul>\n<p><code class=\"language-text\">Redis</code> 저장소를 활용했습니다.</p>\n<ul>\n<li>콕 찌르기 알림은 사용자들의 중요한 정보라거나, 보안적으로 문제되는 정보라고 생각하지 않았기 때문에,</li>\n</ul>\n<p><code class=\"language-text\">FirebaseMessaging</code>의 <code class=\"language-text\">sendAsync()</code>를 활용했습니다. 즉, <code class=\"language-text\">Firebase</code> 서버로 비동기 요청을 하여 성능을 챙겼습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendKnockNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberTest</span> member<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> targetId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> roomId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> knockKey <span class=\"token operator\">=</span> <span class=\"token function\">generateKnockKey</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">memberId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> targetId<span class=\"token punctuation\">,</span> roomId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">validateConflictKnockNotification</span><span class=\"token punctuation\">(</span>knockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">validateFcmToken</span><span class=\"token punctuation\">(</span>targetId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Notification</span> notification <span class=\"token operator\">=</span> <span class=\"token class-name\">NotificationMapper</span><span class=\"token punctuation\">.</span><span class=\"token function\">toKnockNotificationEntity</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">nickname</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">sendAsyncFcm</span><span class=\"token punctuation\">(</span>targetId<span class=\"token punctuation\">,</span> notification<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    notificationRepository<span class=\"token punctuation\">.</span><span class=\"token function\">saveKnockNotification</span><span class=\"token punctuation\">(</span>knockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendAsyncFcm</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> fcmTokenKey<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Notification</span> notification<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> fcmToken <span class=\"token operator\">=</span> notificationRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findFcmTokenByMemberId</span><span class=\"token punctuation\">(</span>fcmTokenKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Message</span> message <span class=\"token operator\">=</span> <span class=\"token class-name\">NotificationMapper</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMessageEntity</span><span class=\"token punctuation\">(</span>notification<span class=\"token punctuation\">,</span> fcmToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    firebaseMessaging<span class=\"token punctuation\">.</span><span class=\"token function\">sendAsync</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">validateConflictKnockNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> knockKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>notificationRepository<span class=\"token punctuation\">.</span><span class=\"token function\">existsByKey</span><span class=\"token punctuation\">(</span>knockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConflictException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorMessage</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONFLICT_KNOCK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">validateFcmToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>notificationRepository<span class=\"token punctuation\">.</span><span class=\"token function\">existsFcmTokenByMemberId</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NotFoundException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorMessage</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NOT_FOUND_FCM_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">generateKnockKey</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> targetId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> roomId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">requireNonNull</span><span class=\"token punctuation\">(</span>roomId<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token constant\">UNDER_BAR</span> <span class=\"token operator\">+</span> <span class=\"token function\">requireNonNull</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token constant\">TO</span> <span class=\"token operator\">+</span> <span class=\"token function\">requireNonNull</span><span class=\"token punctuation\">(</span>targetId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>3) 인증 타임에 따른 알림 중 일부분</strong></p>\n<ul>\n<li>방 내의 루틴 인증 시작 타임이 된다면 방 참여자들에게 알림이 간다. 라는 요구사항을 지키기 위해 스케줄러를 활용했습니다.</li>\n<li>성능을 위해 병렬 스트림을 활용했습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/**\n * CRON_CERTIFY_TIME_EXPRESSION : \"0 50 * * * *\";\n * ONE : 1\n * HOURS_IN_A_DAY : 24\n */</span>\n<span class=\"token annotation punctuation\">@Scheduled</span><span class=\"token punctuation\">(</span>cron <span class=\"token operator\">=</span> <span class=\"token constant\">CRON_CERTIFY_TIME_EXPRESSION</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendCertificationTimeNotification</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> certificationTime <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHour</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token constant\">ONE</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token constant\">HOURS_IN_A_DAY</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Participant</span><span class=\"token punctuation\">></span></span> participants <span class=\"token operator\">=</span> participantSearchRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAllByRoomCertifyTime</span><span class=\"token punctuation\">(</span>certificationTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    participants<span class=\"token punctuation\">.</span><span class=\"token function\">parallelStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>participant <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> roomTitle <span class=\"token operator\">=</span> participant<span class=\"token punctuation\">.</span><span class=\"token function\">getRoom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Notification</span> notification <span class=\"token operator\">=</span> <span class=\"token class-name\">NotificationMapper</span><span class=\"token punctuation\">.</span><span class=\"token function\">toCertifyAuthNotificationEntity</span><span class=\"token punctuation\">(</span>roomTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendAsyncFcm</span><span class=\"token punctuation\">(</span>participant<span class=\"token punctuation\">.</span><span class=\"token function\">getMemberId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> notification<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendAsyncFcm</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> fcmTokenKey<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Notification</span> notification<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> fcmToken <span class=\"token operator\">=</span> notificationRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findFcmTokenByMemberId</span><span class=\"token punctuation\">(</span>fcmTokenKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Message</span> message <span class=\"token operator\">=</span> <span class=\"token class-name\">NotificationMapper</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMessageEntity</span><span class=\"token punctuation\">(</span>notification<span class=\"token punctuation\">,</span> fcmToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    firebaseMessaging<span class=\"token punctuation\">.</span><span class=\"token function\">sendAsync</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"병렬-스트림과-반복문-성능-비교\" style=\"position:relative;\"><a href=\"#%EB%B3%91%EB%A0%AC-%EC%8A%A4%ED%8A%B8%EB%A6%BC%EA%B3%BC-%EB%B0%98%EB%B3%B5%EB%AC%B8-%EC%84%B1%EB%8A%A5-%EB%B9%84%EA%B5%90\" aria-label=\"병렬 스트림과 반복문 성능 비교 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>병렬 스트림과 반복문 성능 비교</h2>\n<h3 id=\"배경\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배경</h3>\n<p>현재 모아밤 서비스의 요구사항에 따른 인증 타임 알림 서비스는 레이스 컨디션이 발생해도 문제가 발생하지 않는 로직입니다. 또한 사용자가 늘어나면 늘어날수록 반복이 배로 늘어나게 됩니다. 때문에 병렬 스트림을 쓰는 것에 대해 고민을 하게 되었습니다.</p>\n<h3 id=\"고민-사항\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EB%AF%BC-%EC%82%AC%ED%95%AD\" aria-label=\"고민 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고민 사항</h3>\n<ul>\n<li>현재 로직만 봤을 때, 반복문 내에서 지연되는 부분이 없는 데 병렬 처리가 단순 반복문보다 성능이 좋을까요?</li>\n<li><code class=\"language-text\">Stream</code>의 내부적으로 동작하는 박싱, 언박싱을 고려했을 때, 병렬 처리가 단순 반복문보다 성능이 좋을까요?</li>\n</ul>\n<p>고민사항을 토대로 어떻게 결론을 내릴까 하다가, <strong>백문이 불여일견</strong>처럼 직접 테스트를 해보고 결론을 내리도록 했습니다.</p>\n<h3 id=\"성능-테스트\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"성능 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능 테스트</h3>\n<blockquote>\n<p>메서드 내부에서 Thread.sleep(5)를 선언하여, 5ms의 지연시간을 가지고 테스트 하였습니다.</p>\n</blockquote>\n<p><strong>1) 임의 리스트 생성 후 테스트 성능 : 100_000 (십만)</strong></p>\n<ul>\n<li>일반 반복문이 너무 오래 걸려 중단했습니다. 그 정도로 큰 차이가 났습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAhElEQVQI1zVPWw6DMAzjPhPQd0tXBC2Mst3/PkbJlA/LcewoyfBSGvXq2NuFenTEvGLSDsoGzMYzpBbWLnItmPTfG5XDQOZxf3H2H7b24bCLGTYsDNHGJ/j0Zk0sGfG0S7xsGJVFPW+UrSGvOwd8KjxEoKGwFO7T9aSJqUc+MS2ZTeDPHm9qYni4AvdvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm8.png\"\n        title=\"fcm8.png\"\n        src=\"/static/d2164f4884655ef7779d95030c254cec/37523/fcm8.png\"\n        srcset=\"/static/d2164f4884655ef7779d95030c254cec/e9ff0/fcm8.png 180w,\n/static/d2164f4884655ef7779d95030c254cec/f21e7/fcm8.png 360w,\n/static/d2164f4884655ef7779d95030c254cec/37523/fcm8.png 720w,\n/static/d2164f4884655ef7779d95030c254cec/302a4/fcm8.png 1080w,\n/static/d2164f4884655ef7779d95030c254cec/1dbe8/fcm8.png 1374w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>2) 임의 리스트 생성 후 테스트 성능 : 10_000 (일만)</strong></p>\n<ul>\n<li>약 7~8배 차이로 병렬 처리가 더 좋았습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnklEQVQY032Q3QqDMAxGfZsNR622Te3PtM453YS9/+N8o5WKeLGLQ75ASA4pwvQCtR5cEmqpUbIal5Lheqv+cpyJmdUSgiwKToRxfmNZv3hMC4wPkNqCjIdq3U7sjxjfp6rtHdp2aVlaKKzBc/5gWla4bkiWZ7ggNKpN+VxzrhqFRhkUTEi4fkAY5/1qvhxfkU03k41smO1iFmTAhcYPGM+B+rTSRHsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm9.png\"\n        title=\"fcm9.png\"\n        src=\"/static/243274bb8866c35ba7fb0f20b1d30184/37523/fcm9.png\"\n        srcset=\"/static/243274bb8866c35ba7fb0f20b1d30184/e9ff0/fcm9.png 180w,\n/static/243274bb8866c35ba7fb0f20b1d30184/f21e7/fcm9.png 360w,\n/static/243274bb8866c35ba7fb0f20b1d30184/37523/fcm9.png 720w,\n/static/243274bb8866c35ba7fb0f20b1d30184/302a4/fcm9.png 1080w,\n/static/243274bb8866c35ba7fb0f20b1d30184/21482/fcm9.png 1350w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>3) 임의 리스트 생성 후 테스트 성능 : 1_000 (천)</strong></p>\n<ul>\n<li>약 6배 차이로 병렬 처리가 더 좋았습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAgUlEQVQI112O7QqDMAxF+zobqNW26afVyWRjsPd/nDuSYRF/hJPcpIeqe68R64Jl21EfT6R5RT9adNo0nvszj+J5mBy0ISgWUil4fb7Y9jdCrphcgHER1icYijK7kBs5u3K0Xvbq1g3QRCLjH7KQj1hGsbQHPs2SMTk77v55FiHXDxHqYiU/pSYWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm10.png\"\n        title=\"fcm10.png\"\n        src=\"/static/726d15988da0807fc7be88ce9685ae05/37523/fcm10.png\"\n        srcset=\"/static/726d15988da0807fc7be88ce9685ae05/e9ff0/fcm10.png 180w,\n/static/726d15988da0807fc7be88ce9685ae05/f21e7/fcm10.png 360w,\n/static/726d15988da0807fc7be88ce9685ae05/37523/fcm10.png 720w,\n/static/726d15988da0807fc7be88ce9685ae05/302a4/fcm10.png 1080w,\n/static/726d15988da0807fc7be88ce9685ae05/6569d/fcm10.png 1328w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>4) 임의 리스트 생성 후 테스트 성능 : 100 (백)</strong></p>\n<ul>\n<li>드디어 단순 반복문 성능이 더 좋네요. 즉 값이 적을 때는 단순 반복문이 더 빠른 것 같습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAkklEQVQY05WOSw7CIABEuY32Qyl/EDWtWrXR+19nzOBON7p4mWQY4AlpLMo0w4YMZTxGG7Dthp/ZtBKtHKFdwqAdRNMrmJSwrA9c1ycO0xk+Fbi4q8mPSMj7muw+YT/aCGUCRCMVbM6YLzeclnsd0FS7WKExocE74xfs+RjvVcNOafhckMqxDv4x5I5nxif0yuAFm7WA5/Cq4JgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fcm11.png\"\n        title=\"fcm11.png\"\n        src=\"/static/f85817b687fa9f0d128e489c6f6b0901/37523/fcm11.png\"\n        srcset=\"/static/f85817b687fa9f0d128e489c6f6b0901/e9ff0/fcm11.png 180w,\n/static/f85817b687fa9f0d128e489c6f6b0901/f21e7/fcm11.png 360w,\n/static/f85817b687fa9f0d128e489c6f6b0901/37523/fcm11.png 720w,\n/static/f85817b687fa9f0d128e489c6f6b0901/302a4/fcm11.png 1080w,\n/static/f85817b687fa9f0d128e489c6f6b0901/b5a09/fcm11.png 1360w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h3>\n<p>테스트를 통해 사용자가 많아지면 많아질수록 병렬처리가 더 좋다는 결과를 도출했습니다. 그래도 100명 정도라면 단순 반복문이 더 좋긴 합니다. 다만, 그 차이는 미미한 것으로 확인이 되었죠. 때문에, 병렬 스트림을 통해 처리하는 것이 더 효율적이라고 판단하였습니다. 감사합니다!</p>\n<hr>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://velog.io/@heelieben/FCM-React-Web-Push-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-feat.-pwa-service-worker\">React + FCM 구현하기</a></li>\n<li><a href=\"https://seungwoolog.tistory.com/88\">FCM 도입 시 고려해야 할 사항</a></li>\n<li><a href=\"https://firebase.google.com/docs/cloud-messaging/manage-tokens?hl=ko\">FCM 등록 토큰 관리 모범 사례 - 공식문서</a></li>\n<li><a href=\"https://zuminternet.github.io/FCM-PUSH/\">FCM 푸시 파헤치기 - ZUM Internet Tech</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%AA%A8%EC%95%84%EB%B0%A4-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EB%8A%94-%EC%96%B4%EB%96%A4-push-%EC%95%8C%EB%A6%BC%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C\">모아밤 서비스에는 어떤 Push 알림이 필요할까?</a></p>\n</li>\n<li>\n<p><a href=\"#fcmfirebase-cloud-messaging\">FCM(Firebase Cloud Messaging)</a></p>\n<ul>\n<li>\n<p><a href=\"#fcm-token-%EC%9D%B4%EB%9E%80\">FCM Token 이란?</a></p>\n<ul>\n<li><a href=\"#%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1\">토큰 생성</a></li>\n<li><a href=\"#%ED%86%A0%ED%81%B0-%EB%A7%8C%EB%A3%8C\">토큰 만료</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%91%B8%EC%8B%9C-%EC%95%8C%EB%A6%BC%EC%9D%84-%EC%9C%84%ED%95%9C-3%EA%B0%80%EC%A7%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\">푸시 알림을 위한 3가지 컴포넌트</a></p>\n<ul>\n<li><a href=\"#%EC%95%8C%EB%A6%BC-%EC%A0%9C%EA%B3%B5%EC%9E%90-service-application\">알림 제공자 (Service Application)</a></li>\n<li><a href=\"#fcm\">FCM</a></li>\n<li><a href=\"#%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4-%EC%9E%A5%EC%B9%98\">디바이스 장치</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#fcm-%ED%86%A0%ED%81%B0%EC%9D%98-%EC%8B%A0%EC%84%B1%EB%8F%84-%EB%B3%B4%EC%9E%A5\">FCM 토큰의 신성도 보장</a></p>\n</li>\n<li>\n<p><a href=\"#fcm-%ED%9D%90%EB%A6%84\">FCM 흐름</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%8C%EB%A6%BC-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98\">알림 아키텍처</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AA%A8%EC%95%84%EB%B0%A4%EC%9D%98-fcm-%EB%8F%84%EC%9E%85%EA%B8%B0\">모아밤의 FCM 도입기</a></p>\n<ul>\n<li><a href=\"#%EB%94%94%ED%8E%9C%EB%8D%98%EC%8B%9C-%EB%93%B1%EB%A1%9D\">디펜던시 등록</a></li>\n<li><a href=\"#firebase-%EC%97%B0%EB%8F%99-%EC%A4%80%EB%B9%84\">Firebase 연동 준비</a></li>\n<li><a href=\"#spring-boot-%EC%84%A4%EC%A0%95\">Spring Boot 설정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B3%91%EB%A0%AC-%EC%8A%A4%ED%8A%B8%EB%A6%BC%EA%B3%BC-%EB%B0%98%EB%B3%B5%EB%AC%B8-%EC%84%B1%EB%8A%A5-%EB%B9%84%EA%B5%90\">병렬 스트림과 반복문 성능 비교</a></p>\n<ul>\n<li><a href=\"#%EB%B0%B0%EA%B2%BD\">배경</a></li>\n<li><a href=\"#%EA%B3%A0%EB%AF%BC-%EC%82%AC%ED%95%AD\">고민 사항</a></li>\n<li><a href=\"#%EC%84%B1%EB%8A%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8\">성능 테스트</a></li>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>\n</div>","excerpt":"안녕하세요. 현재 데브코스 4기로 활동 중인 모아밤팀 서버 개발자 홍혁준입니다. 이번 포스팅에서 에 대해 이야기를 풀어내 보려고 합니다. 감사합니다. 모아밤 서비스에는 어떤 Push 알림이 필요할까? 푸시 알림이란 사용자가 서비스를 사용하고 있지 않은 상황에서도 사용자에게 알림을 보내는 방법입니다. 푸시 알림을 가장 단순하게 구현하는 방법은  방식으로 주기적으로 서버에 편지 도착 여부를 묻는  요청을 보내는 방법이 있는데요. 이  방식은 과  방식이 있는데, 은 서버가 줄 데이터가 없음에도 주기적으로 요청과 응답 작업을 반복해야 해서 불필요한 트래픽이 발생합니다. 반면 은  방식에 비해 불필요한 요청과 응답을 반복하지 않아도 되지만, 클라이언트와 연결을 계속 유지해야 해서 서버 자원을 소모하게 되죠. 이런 단점들로 인해 을 찾아보게 되었습니다. 모아밤 서비스는 앱, 웹을 지원해야 합니다. 그리고 현재 모아밤에서 구현하고자 하는 기능은 사용자가 원할 때, 다른 사용자에게 제한된 횟수…","frontmatter":{"date":"November 07, 2023","title":"모아밤의 FCM Push 알림 도입기","categories":"Tech","author":"홍혁준","emoji":"🧑🏻‍💻"},"fields":{"slug":"/firebase-push-notification/"}},"next":{"id":"ccf3e877-d666-58fe-86c8-7177ba094c1f","html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<meta name=\"generator\" content=\"Asciidoctor 2.0.18\">\n<title>쿠폰(Coupon)</title>\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700\">\n<style>\n/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */\n/* Uncomment the following line when using as a custom stylesheet */\n/* @import \"https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700\"; */\nhtml{font-family:sans-serif;-webkit-text-size-adjust:100%}\na{background:none}\na:focus{outline:thin dotted}\na:active,a:hover{outline:0}\nh1{font-size:2em;margin:.67em 0}\nb,strong{font-weight:bold}\nabbr{font-size:.9em}\nabbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}\ndfn{font-style:italic}\nhr{height:0}\nmark{background:#ff0;color:#000}\ncode,kbd,pre,samp{font-family:monospace;font-size:1em}\npre{white-space:pre-wrap}\nq{quotes:\"\\201C\" \"\\201D\" \"\\2018\" \"\\2019\"}\nsmall{font-size:80%}\nsub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}\nsup{top:-.5em}\nsub{bottom:-.25em}\nimg{border:0}\nsvg:not(:root){overflow:hidden}\nfigure{margin:0}\naudio,video{display:inline-block}\naudio:not([controls]){display:none;height:0}\nfieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}\nlegend{border:0;padding:0}\nbutton,input,select,textarea{font-family:inherit;font-size:100%;margin:0}\nbutton,input{line-height:normal}\nbutton,select{text-transform:none}\nbutton,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}\nbutton[disabled],html input[disabled]{cursor:default}\ninput[type=checkbox],input[type=radio]{padding:0}\nbutton::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}\ntextarea{overflow:auto;vertical-align:top}\ntable{border-collapse:collapse;border-spacing:0}\n*,::before,::after{box-sizing:border-box}\nhtml,body{font-size:100%}\nbody{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:\"Noto Serif\",\"DejaVu Serif\",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}\na:hover{cursor:pointer}\nimg,object,embed{max-width:100%;height:auto}\nobject,embed{height:100%}\nimg{-ms-interpolation-mode:bicubic}\n.left{float:left!important}\n.right{float:right!important}\n.text-left{text-align:left!important}\n.text-right{text-align:right!important}\n.text-center{text-align:center!important}\n.text-justify{text-align:justify!important}\n.hide{display:none}\nimg,object,svg{display:inline-block;vertical-align:middle}\ntextarea{height:auto;min-height:50px}\nselect{width:100%}\n.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}\ndiv,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}\na{color:#2156a5;text-decoration:underline;line-height:inherit}\na:hover,a:focus{color:#1d4b8f}\na img{border:0}\np{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}\np aside{font-size:.875em;line-height:1.35;font-style:italic}\nh1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:\"Open Sans\",\"DejaVu Sans\",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}\nh1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}\nh1{font-size:2.125em}\nh2{font-size:1.6875em}\nh3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}\nh4,h5{font-size:1.125em}\nh6{font-size:1em}\nhr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}\nem,i{font-style:italic;line-height:inherit}\nstrong,b{font-weight:bold;line-height:inherit}\nsmall{font-size:60%;line-height:inherit}\ncode{font-family:\"Droid Sans Mono\",\"DejaVu Sans Mono\",monospace;font-weight:400;color:rgba(0,0,0,.9)}\nul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}\nul,ol{margin-left:1.5em}\nul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}\nul.circle{list-style-type:circle}\nul.disc{list-style-type:disc}\nul.square{list-style-type:square}\nul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}\nol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}\ndl dt{margin-bottom:.3125em;font-weight:bold}\ndl dd{margin-bottom:1.25em}\nblockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}\nblockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}\n@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}\nh1{font-size:2.75em}\nh2{font-size:2.3125em}\nh3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}\nh4{font-size:1.4375em}}\ntable{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}\ntable thead,table tfoot{background:#f7f8f7}\ntable thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}\ntable tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}\ntable tr.even,table tr.alt{background:#f8f8f7}\ntable thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}\nh1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}\nh1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}\n.center{margin-left:auto;margin-right:auto}\n.stretch{width:100%}\n.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:\" \";display:table}\n.clearfix::after,.float-group::after{clear:both}\n:not(pre).nobreak{word-wrap:normal}\n:not(pre).nowrap{white-space:nowrap}\n:not(pre).pre-wrap{white-space:pre-wrap}\n:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}\npre{color:rgba(0,0,0,.9);font-family:\"Droid Sans Mono\",\"DejaVu Sans Mono\",monospace;line-height:1.45;text-rendering:optimizeSpeed}\npre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}\npre>code{display:block}\npre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}\nem em{font-style:normal}\nstrong strong{font-weight:400}\n.keyseq{color:rgba(51,51,51,.8)}\nkbd{font-family:\"Droid Sans Mono\",\"DejaVu Sans Mono\",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}\n.keyseq kbd:first-child{margin-left:0}\n.keyseq kbd:last-child{margin-right:0}\n.menuseq,.menuref{color:#000}\n.menuseq b:not(.caret),.menuref{font-weight:inherit}\n.menuseq{word-spacing:-.02em}\n.menuseq b.caret{font-size:1.25em;line-height:.8}\n.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}\nb.button::before,b.button::after{position:relative;top:-1px;font-weight:400}\nb.button::before{content:\"[\";padding:0 3px 0 2px}\nb.button::after{content:\"]\";padding:0 2px 0 3px}\np a>code:hover{color:rgba(0,0,0,.9)}\n#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}\n#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:\" \";display:table}\n#header::after,#content::after,#footnotes::after,#footer::after{clear:both}\n#content{margin-top:1.25em}\n#content::before{content:none}\n#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}\n#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}\n#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}\n#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}\n#header .details span:first-child{margin-left:-.125em}\n#header .details span.email a{color:rgba(0,0,0,.85)}\n#header .details br{display:none}\n#header .details br+span::before{content:\"\\00a0\\2013\\00a0\"}\n#header .details br+span.author::before{content:\"\\00a0\\22c5\\00a0\";color:rgba(0,0,0,.85)}\n#header .details br+span#revremark::before{content:\"\\00a0|\\00a0\"}\n#header #revnumber{text-transform:capitalize}\n#header #revnumber::after{content:\"\\00a0\"}\n#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}\n#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}\n#toc>ul{margin-left:.125em}\n#toc ul.sectlevel0>li>a{font-style:italic}\n#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}\n#toc ul{font-family:\"Open Sans\",\"DejaVu Sans\",sans-serif;list-style-type:none}\n#toc li{line-height:1.3334;margin-top:.3334em}\n#toc a{text-decoration:none}\n#toc a:active{text-decoration:underline}\n#toctitle{color:#7a2518;font-size:1.2em}\n@media screen and (min-width:768px){#toctitle{font-size:1.375em}\nbody.toc2{padding-left:15em;padding-right:0}\n#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}\n#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}\n#toc.toc2>ul{font-size:.9em;margin-bottom:0}\n#toc.toc2 ul ul{margin-left:0;padding-left:1em}\n#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}\nbody.toc2.toc-right{padding-left:0;padding-right:15em}\nbody.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}\n@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}\n#toc.toc2{width:20em}\n#toc.toc2 #toctitle{font-size:1.375em}\n#toc.toc2>ul{font-size:.95em}\n#toc.toc2 ul ul{padding-left:1.25em}\nbody.toc2.toc-right{padding-left:0;padding-right:20em}}\n#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}\n#content #toc>:first-child{margin-top:0}\n#content #toc>:last-child{margin-bottom:0}\n#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}\n#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}\n#content{margin-bottom:.625em}\n.sect1{padding-bottom:.625em}\n@media screen and (min-width:768px){#content{margin-bottom:1.25em}\n.sect1{padding-bottom:1.25em}}\n.sect1:last-child{padding-bottom:0}\n.sect1+.sect1{border-top:1px solid #e7e7e9}\n#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}\n#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:\"\\00A7\";font-size:.85em;display:block;padding-top:.1em}\n#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}\n#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}\n#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}\ndetails,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}\ndetails{margin-left:1.25rem}\ndetails>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}\ndetails>summary::-webkit-details-marker{display:none}\ndetails>summary::before{content:\"\";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}\ndetails[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}\ndetails>summary::after{content:\"\";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}\n.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:\"Noto Serif\",\"DejaVu Serif\",serif;font-size:1rem;font-style:italic}\ntable.tableblock.fit-content>caption.title{white-space:nowrap;width:0}\n.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}\n.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}\n.admonitionblock>table td.icon{text-align:center;width:80px}\n.admonitionblock>table td.icon img{max-width:none}\n.admonitionblock>table td.icon .title{font-weight:bold;font-family:\"Open Sans\",\"DejaVu Sans\",sans-serif;text-transform:uppercase}\n.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}\n.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}\n.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}\n.exampleblock>.content>:first-child{margin-top:0}\n.exampleblock>.content>:last-child{margin-bottom:0}\n.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}\n.sidebarblock>:first-child{margin-top:0}\n.sidebarblock>:last-child{margin-bottom:0}\n.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}\n.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}\n.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}\n@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}\n@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}\n.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^=\"highlight \"]{background:#f7f7f8}\n.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}\n.listingblock>.content{position:relative}\n.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}\n.listingblock:hover code[data-lang]::before{display:block}\n.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}\n.listingblock.terminal pre .command:not([data-prompt])::before{content:\"$\"}\n.listingblock pre.highlightjs{padding:0}\n.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}\n.listingblock pre.prettyprint{border-width:0}\n.prettyprint{background:#f7f7f8}\npre.prettyprint .linenums{line-height:1.45;margin-left:2em}\npre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}\npre.prettyprint li code[data-lang]::before{opacity:1}\npre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}\ntable.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}\ntable.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}\ntable.linenotable td.code{padding-left:.75em}\ntable.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\npre.pygments span.linenos{display:inline-block;margin-right:.75em}\n.quoteblock{margin:0 1em 1.25em 1.5em;display:table}\n.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}\n.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}\n.quoteblock blockquote{margin:0;padding:0;border:0}\n.quoteblock blockquote::before{content:\"\\201c\";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}\n.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}\n.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}\n.verseblock{margin:0 1em 1.25em}\n.verseblock pre{font-family:\"Open Sans\",\"DejaVu Sans\",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}\n.verseblock pre strong{font-weight:400}\n.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}\n.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}\n.quoteblock .attribution br,.verseblock .attribution br{display:none}\n.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}\n.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}\n.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}\n.quoteblock.abstract{margin:0 1em 1.25em;display:block}\n.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}\n.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}\n.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}\n.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}\n.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}\np.tableblock:last-child{margin-bottom:0}\ntd.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}\ntd.tableblock>.content>:last-child{margin-bottom:-1.25em}\ntable.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}\ntable.grid-all>*>tr>*{border-width:1px}\ntable.grid-cols>*>tr>*{border-width:0 1px}\ntable.grid-rows>*>tr>*{border-width:1px 0}\ntable.frame-all{border-width:1px}\ntable.frame-ends{border-width:1px 0}\ntable.frame-sides{border-width:0 1px}\ntable.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}\ntable.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}\ntable.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}\ntable.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}\ntable.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}\nth.halign-left,td.halign-left{text-align:left}\nth.halign-right,td.halign-right{text-align:right}\nth.halign-center,td.halign-center{text-align:center}\nth.valign-top,td.valign-top{vertical-align:top}\nth.valign-bottom,td.valign-bottom{vertical-align:bottom}\nth.valign-middle,td.valign-middle{vertical-align:middle}\ntable thead th,table tfoot th{font-weight:bold}\ntbody tr th{background:#f7f8f7}\ntbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}\np.tableblock>code:only-child{background:none;padding:0}\np.tableblock{font-size:1em}\nol{margin-left:1.75em}\nul li ol{margin-left:1.5em}\ndl dd{margin-left:1.125em}\ndl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}\nli p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}\nul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}\nul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}\nul.unstyled,ol.unstyled{margin-left:0}\nli>p:empty:only-child::before{content:\"\";display:inline-block}\nul.checklist>li>p:first-child{margin-left:-1em}\nul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}\nul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}\nul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}\nul.inline>li{margin-left:1.25em}\n.unstyled dl dt{font-weight:400;font-style:normal}\nol.arabic{list-style-type:decimal}\nol.decimal{list-style-type:decimal-leading-zero}\nol.loweralpha{list-style-type:lower-alpha}\nol.upperalpha{list-style-type:upper-alpha}\nol.lowerroman{list-style-type:lower-roman}\nol.upperroman{list-style-type:upper-roman}\nol.lowergreek{list-style-type:lower-greek}\n.hdlist>table,.colist>table{border:0;background:none}\n.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}\ntd.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}\ntd.hdlist1{font-weight:bold;padding-bottom:1.25em}\ntd.hdlist2{word-wrap:anywhere}\n.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}\n.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}\n.colist td:not([class]):first-child img{max-width:none}\n.colist td:not([class]):last-child{padding:.25em 0}\n.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}\n.imageblock.left{margin:.25em .625em 1.25em 0}\n.imageblock.right{margin:.25em 0 1.25em .625em}\n.imageblock>.title{margin-bottom:0}\n.imageblock.thumb,.imageblock.th{border-width:6px}\n.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}\n.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}\n.image.left{margin-right:.625em}\n.image.right{margin-left:.625em}\na.image{text-decoration:none;display:inline-block}\na.image object{pointer-events:none}\nsup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}\nsup.footnote a,sup.footnoteref a{text-decoration:none}\nsup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}\n#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}\n#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}\n#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}\n#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}\n#footnotes .footnote:last-of-type{margin-bottom:0}\n#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}\ndiv.unbreakable{page-break-inside:avoid}\n.big{font-size:larger}\n.small{font-size:smaller}\n.underline{text-decoration:underline}\n.overline{text-decoration:overline}\n.line-through{text-decoration:line-through}\n.aqua{color:#00bfbf}\n.aqua-background{background:#00fafa}\n.black{color:#000}\n.black-background{background:#000}\n.blue{color:#0000bf}\n.blue-background{background:#0000fa}\n.fuchsia{color:#bf00bf}\n.fuchsia-background{background:#fa00fa}\n.gray{color:#606060}\n.gray-background{background:#7d7d7d}\n.green{color:#006000}\n.green-background{background:#007d00}\n.lime{color:#00bf00}\n.lime-background{background:#00fa00}\n.maroon{color:#600000}\n.maroon-background{background:#7d0000}\n.navy{color:#000060}\n.navy-background{background:#00007d}\n.olive{color:#606000}\n.olive-background{background:#7d7d00}\n.purple{color:#600060}\n.purple-background{background:#7d007d}\n.red{color:#bf0000}\n.red-background{background:#fa0000}\n.silver{color:#909090}\n.silver-background{background:#bcbcbc}\n.teal{color:#006060}\n.teal-background{background:#007d7d}\n.white{color:#bfbfbf}\n.white-background{background:#fafafa}\n.yellow{color:#bfbf00}\n.yellow-background{background:#fafa00}\nspan.icon>.fa{cursor:default}\na span.icon>.fa{cursor:inherit}\n.admonitionblock td.icon [class^=\"fa icon-\"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}\n.admonitionblock td.icon .icon-note::before{content:\"\\f05a\";color:#19407c}\n.admonitionblock td.icon .icon-tip::before{content:\"\\f0eb\";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}\n.admonitionblock td.icon .icon-warning::before{content:\"\\f071\";color:#bf6900}\n.admonitionblock td.icon .icon-caution::before{content:\"\\f06d\";color:#bf3400}\n.admonitionblock td.icon .icon-important::before{content:\"\\f06a\";color:#bf0000}\n.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:\"Open Sans\",\"DejaVu Sans\",sans-serif;font-style:normal;font-weight:bold}\n.conum[data-value] *{color:#fff!important}\n.conum[data-value]+b{display:none}\n.conum[data-value]::after{content:attr(data-value)}\npre .conum[data-value]{position:relative;top:-.125em}\nb.conum *{color:inherit!important}\n.conum:not([data-value]):empty{display:none}\ndt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}\nh1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}\np strong,td.content strong,div.footnote strong{letter-spacing:-.005em}\np,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}\np{margin-bottom:1.25rem}\n.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}\n.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}\n.print-only{display:none!important}\n@page{margin:1.25cm .75cm}\n@media print{*{box-shadow:none!important;text-shadow:none!important}\nhtml{font-size:80%}\na{color:inherit!important;text-decoration:underline!important}\na.bare,a[href^=\"#\"],a[href^=\"mailto:\"]{text-decoration:none!important}\na[href^=\"http:\"]:not(.bare)::after,a[href^=\"https:\"]:not(.bare)::after{content:\"(\" attr(href) \")\";display:inline-block;font-size:.875em;padding-left:.25em}\nabbr[title]{border-bottom:1px dotted}\nabbr[title]::after{content:\" (\" attr(title) \")\"}\npre,blockquote,tr,img,object,svg{page-break-inside:avoid}\nthead{display:table-header-group}\nsvg{max-width:100%}\np,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}\nh2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}\n#header,#content,#footnotes,#footer{max-width:none}\n#toc,.sidebarblock,.exampleblock>.content{background:none!important}\n#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}\nbody.book #header{text-align:center}\nbody.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}\nbody.book #header .details{border:0!important;display:block;padding:0!important}\nbody.book #header .details span:first-child{margin-left:0!important}\nbody.book #header .details br{display:block}\nbody.book #header .details br+span::before{content:none!important}\nbody.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}\nbody.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}\n.listingblock code[data-lang]::before{display:block}\n#footer{padding:0 .9375em}\n.hide-on-print{display:none!important}\n.print-only{display:block!important}\n.hide-for-print{display:none!important}\n.show-for-print{display:inherit!important}}\n@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}\n.sect1{padding:0!important}\n.sect1+.sect1{border:0}\n#footer{background:none}\n#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}\n@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}\n</style>\n</head>\n<body class=\"article\">\n<div id=\"header\">\n</div>\n<div id=\"content\">\n<div class=\"sect1\">\n<h2 id=\"_쿠폰coupon\">쿠폰(Coupon)</h2>\n<div class=\"sectionbody\">\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>쿠폰에 대해 생성/삭제/조회/발급/사용 기능을 제공합니다.</pre>\n</div>\n</div>\n<hr>\n<div class=\"sect2\">\n<h3 id=\"_쿠폰_생성\">쿠폰 생성</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>관리자가 쿠폰을 생성합니다.</pre>\n</div>\n</div>\n<h4 id=\"_요청\" class=\"discrete\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">POST /admins/coupons HTTP/1.1\nContent-Type: application/json;charset=UTF-8\nContent-Length: 178\nHost: localhost:8080\n<p>{\n“name” : “couponName”,\n“description” : “coupon description”,\n“type” : “황금”,\n“point” : 10,\n“maxCount” : 10,\n“startAt” : “2023-02-01”,\n“openAt” : “2023-01-01”\n}</code></pre></p>\n</div>\n</div>\n<h4 id=\"_응답\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 201 Created\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600</code></pre>\n</div>\n</div>\n<hr>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_쿠폰_삭제\">쿠폰 삭제</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>관리자가 쿠폰 ID와 일치하는 쿠폰을 삭제합니다.</pre>\n</div>\n</div>\n<h4 id=\"_요청_2\" class=\"discrete\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">DELETE /admins/coupons/36 HTTP/1.1\nHost: localhost:8080</code></pre>\n</div>\n</div>\n<h4 id=\"_응답_2\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600</code></pre>\n</div>\n</div>\n<hr>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_특정_쿠폰_조회\">특정 쿠폰 조회</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>관리자 혹은 사용자가 특정 ID와 일치하는 쿠폰을 조회합니다.</pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_요청_3\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">GET /coupons/24 HTTP/1.1\nHost: localhost:8080</code></pre>\n</div>\n</div>\n<h4 id=\"_응답_3\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600\nContent-Type: application/json\nContent-Length: 201\n<p>{\n“id” : 24,\n“adminName” : “ID : 1”,\n“name” : “couponName”,\n“description” : \"\",\n“point” : 10,\n“maxCount” : 100,\n“type” : “MORNING”,\n“startAt” : “2023-02-01”,\n“openAt” : “2023-01-01”\n}</code></pre></p>\n</div>\n</div>\n<hr>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_상태에_따른_쿠폰들을_조회\">상태에 따른 쿠폰들을 조회</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>관리자 혹은 사용자가 날짜 상태에 따라 쿠폰들을 조회합니다.</pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_요청_4\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">POST /coupons/search HTTP/1.1\nContent-Type: application/json;charset=UTF-8\nContent-Length: 41\nHost: localhost:8080\n<p>{\n“opened” : false,\n“ended” : false\n}</code></pre></p>\n</div>\n</div>\n<h4 id=\"_응답_4\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600\nContent-Type: application/json\nContent-Length: 202\n<p>[ {\n“id” : 25,\n“adminName” : “ID : 1”,\n“name” : “coupon1”,\n“description” : \"\",\n“point” : 10,\n“maxCount” : 100,\n“type” : “MORNING”,\n“startAt” : “2023-03-01”,\n“openAt” : “2023-01-01”\n} ]</code></pre></p>\n</div>\n</div>\n<hr>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_특정_쿠폰에_대해_발급\">특정 쿠폰에 대해 발급</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>사용자가 발급 가능한 쿠폰을 선착순으로 발급 받습니다.</pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_요청_5\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">POST /coupons HTTP/1.1\nContent-Type: application/x-www-form-urlencoded\nHost: localhost:8080\nContent-Length: 21\n<p>couponName=couponName</code></pre></p>\n</div>\n</div>\n<h4 id=\"_응답_5\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 409 Conflict\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600\nContent-Type: application/json\nContent-Length: 63\n<p>{\n“message” : “이미 쿠폰 발급에 성공했습니다!”\n}</code></pre></p>\n</div>\n</div>\n<hr>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_특정_사용자의_쿠폰_보관함을_조회\">특정 사용자의 쿠폰 보관함을 조회</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>사용자가 자신의 보관함에 있는 쿠폰들을 조회합니다.</pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_요청_6\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">GET /my-coupons HTTP/1.1\nHost: localhost:8080</code></pre>\n</div>\n</div>\n<h4 id=\"_응답_6\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600\nContent-Type: application/json\nContent-Length: 3\n<p>[ ]</code></pre></p>\n</div>\n</div>\n<hr>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_쿠폰을_사용\">쿠폰을 사용</h3>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>사용자가 자신의 보관함에 있는 쿠폰들을 사용합니다.</pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_요청_7\">요청</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">POST /my-coupons/8 HTTP/1.1\nHost: localhost:8080\nContent-Type: application/x-www-form-urlencoded</code></pre>\n</div>\n</div>\n<h4 id=\"_응답_7\" class=\"discrete\">응답</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight nowrap\"><code class=\"language-http\" data-lang=\"http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Origin:\nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH\nAccess-Control-Allow-Headers: Origin, Accept, Access-Control-Request-Method, Access-Control-Request-Headers, X-Requested-With,Content-Type, Referer\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 3600</code></pre>\n</div>\n</div>\n<hr>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div id=\"footer\">\n<div id=\"footer-text\">\nVersion 0.0.1-SNAPSHOT<br>\nLast updated 2023-11-27 17:38:59 +0900\n</div>\n</div>\n</body>\n</html>","frontmatter":{"date":"November 07, 2023","title":"RestDocs-쿠폰","categories":"Docs","author":"홍혁준","emoji":"🧑🏻‍💻"},"fields":{"slug":"/restdoc-coupon/coupon/"}},"prev":{"id":"1143d3ab-acf3-5d41-978d-501a679f166b","html":"<p>안녕하세요. 현재 데브코스 4기로 활동 중인 모아밤팀 서버 개발자 홍혁준입니다.<br>\n이번 포스팅에서 <strong>예외 처리</strong>에 대해 이야기를 풀어내 보려고 합니다. 감사합니다.</p>\n<hr>\n<h2 id=\"배경\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배경</h2>\n<p>모아밤에서는 @RestControllerAdvice와 @ExceptionHandler를 통해 예외\n처리를 진행하고 있습니다. 하지만 왜? 해당 방식을 사용할까요? 단순 예외 처리가 아닌\n일반적인 요청 흐름과 예외 발생 시, 흐름을 파악하여 왜 해당 방식을 사용하게 되었는 지 살펴봅시다!</p>\n<h2 id=\"사전-지식\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A0%84-%EC%A7%80%EC%8B%9D\" aria-label=\"사전 지식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사전 지식</h2>\n<h3 id=\"basicerrorcontroller\" style=\"position:relative;\"><a href=\"#basicerrorcontroller\" aria-label=\"basicerrorcontroller permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BasicErrorController</h3>\n<p>스프링은 예외 처리를 위한 BasicErrorController를\n구현했습니다. 그리고 스프링 부트는 예외 발생 시, 기본적으로 <code class=\"language-text\">/error</code>로\n예외 요청을 다시 전달하도록 WAS 설정이 되어 있습니다.\n즉, 별도 설정이 없다면 예외 발생 시, BasicErrorController로 예외\n처리 요청이 전달됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQ4y32SV5LcMAxEdZsZkUgkxaTVOH34/jdqF6kJDjv+eNUNlgS1QCzFPGLakLaMXOrUR73l8vRDB8IM5xy8909+r5fABPKM6+Xy4nrF9XKdfr37p64ObrKe3Js9dLEsCEVhOUFzh+aCcWYlQnODlg4rFc/nisCyQXOEpvBJwt6hiSGRwcbgMJQgYSBPWEfN85zNQBpB+klDzQqJEZIqJBZw2MAhn36+4ODJ/4l3cG6d+L/mucTsoZFBOpIJeKQZSaOCgoDUg81PPT1NRqrPWH5+9/jxlXB821FvHfXWUPaKWgNai6h7P+ltYhZARG9ZNmWUIKh7Rjka6tGQ94ocDSVF5NyQtrEyaa6NhQBmfsti5BDYwWiFSoBZmggHKAeYBJDzWNexMq9VefvL41atKbQmaNshuU6sZIQm8Oz/2+CfhioeFhi5Kcqu2Ipg64bU48SSgYghIiDmOScRhaiCRaZORO63zA63LPjyUXH0itte0GtB6wf6fqC2HW3/mH7/OKavrSPEhBDi1DHbEON5KZ4ITB7EAmaZOpKMrw/GQ+fAz/qR5DXL9ZytO+tfaY2SYfVfcDIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"exception1.png\"\n        title=\"exception1.png\"\n        src=\"/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/37523/exception1.png\"\n        srcset=\"/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/e9ff0/exception1.png 180w,\n/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/f21e7/exception1.png 360w,\n/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/37523/exception1.png 720w,\n/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/302a4/exception1.png 1080w,\n/static/1e9a8283a0bf36b8a7ccdfe8bce101eb/21b4d/exception1.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>BasicErrorController는 accept Header에 따라 예외 페이지를\n반환하거나 예외 메시지를 반환합니다.\n예외 경로는 위에서 말했듯, 기본적으로 <code class=\"language-text\">/error</code>로 정의되어 있습니다.</p>\n<h3 id=\"스프링의-예외-처리-흐름\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%ED%9D%90%EB%A6%84\" aria-label=\"스프링의 예외 처리 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링의 예외 처리 흐름</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVQoz3WSbU/DIBSF9///lx80LjFG48tcna4228oYawsUVvoYUKZOvckp5OZwzrnQyTiOZEAEtOqZuppSV5dYvU6977zEPZ7huMaacFJjGNGtpFrcs6nmONvxjf/FOzFJBlHwMBzonaXTBm0t2ljkesX8esrrww2NlDhj6Oo1plGEYWAM4bfBp+uk3gmK5RPFy4xFVaDaJjmF8QPOD7RS8Hh5xvzqnEYKnLX4rsVpTQghISedZHXvDz8H+hzjtCKt7xrKuyuWt1NsTB2bOWH8hDDgnPvz8vMo2mqkkqw2NXIvadp9QtxvNyt2sqazOguGo+B/JZVg+VYwm9+zKAvEXrBVgteyYPZ0x8vbM0KJL8G+71OaD/EOo3cJ3tvUyzUMwy+zEE5+mygUE3rvcM6jtjPWy3M25QWtKnHuQN/bZGqMSWvkR+R9fpR3ucW8AN3AzXAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"exception2.png\"\n        title=\"exception2.png\"\n        src=\"/static/46ec4a11beb094900cabf1434617aab4/37523/exception2.png\"\n        srcset=\"/static/46ec4a11beb094900cabf1434617aab4/e9ff0/exception2.png 180w,\n/static/46ec4a11beb094900cabf1434617aab4/f21e7/exception2.png 360w,\n/static/46ec4a11beb094900cabf1434617aab4/37523/exception2.png 720w,\n/static/46ec4a11beb094900cabf1434617aab4/302a4/exception2.png 1080w,\n/static/46ec4a11beb094900cabf1434617aab4/21b4d/exception2.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>ExceptionHandlerExceptionResolver 동작</strong></p>\n<ol>\n<li>예외 발생 시 컨트롤러 안에 적합한 @ExceptionHandler가 있는 지 검사합니다.</li>\n<li>있다면 처리하고 없다면, @RestControllerAdvice로 넘어갑니다.</li>\n<li>@RestControllerAdvice 안에 적합한 @ExceptionHandler가 있으면 처리하고 없다면, 다음 처리기로 넘어갑니다.</li>\n</ol>\n<br/>\n<p><strong>ResponseStatusExceptionResolver 동작</strong></p>\n<ol>\n<li>@ResponseStatus 혹은 ResponseStatusException가 있는 지 검사합니다.</li>\n<li>있다면, ServletResponse의 <code class=\"language-text\">sendError()</code>로 예외를 서블릿까지 전달합니다.</li>\n<li>서블릿은 BasicErrorController로 요청 전달합니다.</li>\n</ol>\n<br/>\n<p><strong>DefaultHandlerExceptionResolver 동작</strong></p>\n<ul>\n<li>스프링 내부 예외인 지 검사 후 맞다면 예외를 처리합니다.</li>\n<li>없다면 적합한 ExceptionResolver가 없어서 예외가 서블릿까지 전달되고 서블릿은 스프링 부트가 진행한 자동 설정에 맞게 BasicErrorController로 요청을 다시 전달합니다.</li>\n</ul>\n<hr>\n<h2 id=\"요청-흐름\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\" aria-label=\"요청 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요청 흐름</h2>\n<h3 id=\"기본-요청-흐름\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\" aria-label=\"기본 요청 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 요청 흐름</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">WAS(Tomcat) -> Filter -> Servlet(Dispatcher-Servlet) -> Interceptor -> Controller</code></pre></div>\n<h3 id=\"컨트롤러에서-예외-발생-시-기본-요청-흐름\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8-%EB%B0%9C%EC%83%9D-%EC%8B%9C-%EA%B8%B0%EB%B3%B8-%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\" aria-label=\"컨트롤러에서 예외 발생 시 기본 요청 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨트롤러에서 예외 발생 시, 기본 요청 흐름</h3>\n<p>WAS에 도착하면 어플리케이션에서 처리를 못하는 예외가 올라왔다고\n판단하고 예외 처리를 진행합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Controller(Error!) -> Interceptor -> Servlet(Dispatcher Servlet) -> Filter -> WAS(Tomcat) \n-> Filter Servlet(Dispatcher Servlet) -> Interceptor -> Controller(BasicErrorController)</code></pre></div>\n<p>이처럼 기본적인 예외 처리 방식은 아래와 같이 결국 <code class=\"language-text\">Exception Controller</code>를 한 번 더 호출하게 됩니다.</p>\n<p>즉, 필터와 인터셉터도 다시 호출되는 것이죠. 정리하면, 이는 요청이 2번 생기는 것이 아닌, 1번의 요청이 2번 전달되는\n것이게 되므로 이를 제어할 수 있도록 별도의 설정이 필요해보입니다.</p>\n<hr>\n<h2 id=\"해결하기\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"해결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결하기</h2>\n<h3 id=\"try-catch\" style=\"position:relative;\"><a href=\"#try-catch\" aria-label=\"try catch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>try-catch</h3>\n<p>보통 자바에서는 <code class=\"language-text\">try-catch</code>를 통해 예외 처리를 합니다. 하지만 모든 코드에\n<code class=\"language-text\">try-catch</code> 문을 붙이는 것은 매우 비효율적입니다.</p>\n<br/>\n<h3 id=\"responsestatus\" style=\"position:relative;\"><a href=\"#responsestatus\" aria-label=\"responsestatus permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@ResponseStatus</h3>\n<p>@ResponseStatus는 HTTP 상태를 변경하도록 도와주는 어노테이션이지만, BasicErrorController에 의한 응답입니다.</p>\n<p>즉, @ResponseStatus을 처리하는 ResponseStatusExceptionResolver는\nWAS까지 예외를 전달시키기 때문에 1번의 요청이 2번 전달됩니다.</p>\n<br/>\n<h3 id=\"responsestatusexception\" style=\"position:relative;\"><a href=\"#responsestatusexception\" aria-label=\"responsestatusexception permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ResponseStatusException</h3>\n<p>ResponseStatusException은 Spring5 버전부터 제공하는 @ResponseStatus의 대안으로 HTTP 상태와\n함께 선택적으로 <code class=\"language-text\">reason/cause</code>를 추가할 수 있을 뿐만 아니라, 언체크 예외도 상속받고 있어서 명시적으로 예외 처리를 하지 않아도 됩니다.</p>\n<p>즉, HTTP 상태를 직접 설정해 예외 클래스와 결합도를 낮추고 기본적인 예외 처리를 빠르게 적용하여\n손쉽게 프로토타이핑할 수 있습니다. 하지만 여전히 ResponseStatusExceptionResolver가 예외를 처리합니다.</p>\n<br />\n<h3 id=\"restcontrolleradvice와-exceptionhandler\" style=\"position:relative;\"><a href=\"#restcontrolleradvice%EC%99%80-exceptionhandler\" aria-label=\"restcontrolleradvice와 exceptionhandler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@RestControllerAdvice와 @ExceptionHandler</h3>\n<p>@ExceptionHandler 어노테이션은 컨트롤러 클래스 혹은 @RestControllerAdvice가 있는 클래스의 메소드에 해당\n어노테이션을 추가하고 예외 클래스를 속성으로 받아 손쉽게 예외 처리를 할 수 있도록 도와줍니다.</p>\n<p>즉, @RestControllerAdvice는 @ExceptionHandler를 전역적으로 제공할 수 있도록 스프링에서 제공하는 어노테이션입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQoz52RW3LDIAxFvZ0aCaEHtrGb7n9XtwM0TWaS/vTjDNIMHF1gSURgNWQPZBdIMLJPpBMZpQrEM1gIXBjECeu6IqX0wkJMKHvAzg3WDH4WWCvQtkGbw3p/KvQoQ3yX98N36bN8CLMR7MhTtMuPpCArgzL9Jut9p/eJ3qccwvVjHZPjpohPRXzZoA/INq/d1y4fA8qs/xSSpJGyHALZBTnykMz3e9S/CQu/XPnOUgrjuhR1M7gLqmfY04Fn3n3CS0JmRlHFtjdcZ8PtOnC2HR4B84BHRWz7rL3CPaHGOnrzClUbe9wDTIRFRB7RR6oJEf2Lb3VG9weheA+IAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"exception3.png\"\n        title=\"exception3.png\"\n        src=\"/static/403acff5bec787f3db52f6e5f0e71640/37523/exception3.png\"\n        srcset=\"/static/403acff5bec787f3db52f6e5f0e71640/e9ff0/exception3.png 180w,\n/static/403acff5bec787f3db52f6e5f0e71640/f21e7/exception3.png 360w,\n/static/403acff5bec787f3db52f6e5f0e71640/37523/exception3.png 720w,\n/static/403acff5bec787f3db52f6e5f0e71640/302a4/exception3.png 1080w,\n/static/403acff5bec787f3db52f6e5f0e71640/21b4d/exception3.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>HandlerExceptionResolver : 스프링에서 예외 처리 공통 관심사(Cross-Cutting Concerns)를 메인 로직으로부터 분리해 다양한 예외 처리 방식을 고안한 방식</p>\n</blockquote>\n<p>사전 지식에서 봤듯 @ExceptionHandler는 HandlerExceptionResolver의 구현체 중 ExceptionHandlerExceptionResolver로 처리하게 됩니다.</p>\n<p>ExceptionHandlerExceptionResolver는 발생한 예외를 잡고 HTTP 상태나 응답 메시지를 설정하기 때문에, WAS 입장에선 해당 요청이\n정상적인 응답인 것으로 인식되어 위와 다르게 WAS의 에러 전달이 진행되지 않습니다.</p>\n<p>이러한 이유로 모아밤에서는 @RestControllerAdvice와\n@ExceptionHandler 예외 처리 방식을 선택하게 되었습니다. 감사합니다.</p>\n<hr>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://hongdosan.tistory.com/entry/8-9-%EC%A3%BC%EC%B0%A8-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC\">예외 처리 - 홍도산</a></li>\n<li><a href=\"https://mangkyu.tistory.com/205\">@RestControllerAdvice를 이용한 스프링 예외 처리</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%B0%B0%EA%B2%BD\">배경</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%82%AC%EC%A0%84-%EC%A7%80%EC%8B%9D\">사전 지식</a></p>\n<ul>\n<li><a href=\"#basicerrorcontroller\">BasicErrorController</a></li>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%ED%9D%90%EB%A6%84\">스프링의 예외 처리 흐름</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\">요청 흐름</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\">기본 요청 흐름</a></li>\n<li><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8-%EB%B0%9C%EC%83%9D-%EC%8B%9C-%EA%B8%B0%EB%B3%B8-%EC%9A%94%EC%B2%AD-%ED%9D%90%EB%A6%84\">컨트롤러에서 예외 발생 시, 기본 요청 흐름</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\">해결하기</a></p>\n<ul>\n<li><a href=\"#try-catch\">try-catch</a></li>\n<li><a href=\"#responsestatus\">@ResponseStatus</a></li>\n<li><a href=\"#responsestatusexception\">ResponseStatusException</a></li>\n<li><a href=\"#restcontrolleradvice%EC%99%80-exceptionhandler\">@RestControllerAdvice와 @ExceptionHandler</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"November 09, 2023","title":"모아밤의 예외 처리","categories":"Tech","author":"홍혁준","emoji":"🧑🏻‍💻"},"fields":{"slug":"/exception/"}},"site":{"siteMetadata":{"siteUrl":"https://team-moabam.github.io","comments":{"utterances":{"repo":"team-moabam/team-moabam.github.io"}}}}},"pageContext":{"slug":"/firebase-push-notification/","nextSlug":"/restdoc-coupon/coupon/","prevSlug":"/exception/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}